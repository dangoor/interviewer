<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>KA Interviewer</title>
        <link rel="stylesheet" href="node_modules/codemirror/lib/codemirror.css">
        <link rel="stylesheet" href="node_modules/codemirror/addon/lint/lint.css">
        <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
        <script src="thirdparty/jshint.js"></script>
        <script src="node_modules/react/dist/react.js"></script>
        <script src="node_modules/react-dom/dist/react-dom.min.js"></script>
        <script src="node_modules/subdivide/browser/subdivide.js"></script>
        <script src="thirdparty/Brython/brython.js"></script>
        <script src="thirdparty/Brython/py_VFS.js"></script>
        <script>
            TogetherJSConfig_dontShowClicks = true;
            TogetherJSConfig_suppressJoinConfirmation = true;
            TogetherJSConfig_disableWebRTC = true;
            TogetherJSConfig_hubBase = "http://localhost:8080/";
        </script>
        <script src="thirdparty/togetherjs-min.js"></script>
    </head>
    <body>
        <div id="container"></div>
        <script type="text/python3">
        import sys
        import traceback

        from browser import document as doc, console, window
        cachedOutput = ""
        class cOutput:
            def write(self, data):
                global cachedOutput
                if "console" in doc:
                    doc["console"].value += str(data)
                    if cachedOutput != "":
                        cachedOutput = ""
                else:
                    cachedOutput += str(data)
                    console.log(cachedOutput);
            
            def flush(self):
                pass
        
        def getCachedOutput():
            global cachedOutput
            currentOutput = cachedOutput
            cachedOutput = ""
            return currentOutput
        
        window.getCachedOutput = getCachedOutput

        sys.stdout = cOutput()
        sys.stderr = cOutput()

        def execPythonMain(src):
            try:
                ns = {'__name__':'__main__'}
                exec(src, ns)
            except Exception as exc:
                traceback.print_exc(file=sys.stderr)
        
        window.execPythonMain = execPythonMain

        def execTests(testModules):
            import unittest
            loader = unittest.TestLoader()
            suite = loader.loadTestsFromNames(testModules)
            unittest.TextTestRunner(verbosity=0).run(suite)
        
        window.execTests = execTests
        </script>
        <script src="dist/pybundle.js"></script>
    </body>
</html>